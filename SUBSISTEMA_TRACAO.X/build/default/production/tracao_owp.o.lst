MPASM 5.77                    TRACAO_OWP.ASM   10-11-2018  23:26:30         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00002 ;*              MODIFICAÇÕES PARA USO COM 12F675                   *
                      00003 ;*                FEITAS PELO PROF. MARDSON                        *
                      00004 ;*                    FEVEREIRO DE 2016                            *
                      00005 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00006 
                      00007 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00008 ;*                       NOME DO PROJETO                           *
                      00009 ;*                           CLIENTE                               *
                      00010 ;*         DESENVOLVIDO PELA MOSAICO ENGENHARIA E CONSULTORIA      *
                      00011 ;*   VERSÃO: 1.0                           DATA: 17/06/03          *
                      00012 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00013 ;*                     DESCRIÇÃO DO ARQUIVO                        *
                      00014 ;*-----------------------------------------------------------------*
                      00015 ;*   MODELO PARA O PIC 12F675                                      *
                      00016 ;*                                                                 *
                      00017 ;*                                                                 *
                      00018 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00019 
                      00020 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00021 ;*                     ARQUIVOS DE DEFINIÇÕES                      *
                      00022 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00023 #INCLUDE <p12f675.inc>  ;ARQUIVO PADRÃO MICROCHIP PARA 12F675
                      00001         LIST
                      00002 
                      00003 ;==========================================================================
                      00004 ; Build date : Nov 22 2017
                      00005 ;  MPASM PIC12F675 processor include
                      00006 ; 
                      00007 ;  (c) Copyright 1999-2017 Microchip Technology, All rights reserved
                      00008 ;==========================================================================
                      00009 
                      00367         LIST
                      00024 
2007   3FA4           00025         __CONFIG _BODEN_OFF & _CP_OFF & _PWRTE_ON & _WDT_OFF & _MCLRE_ON & _INTRC_OSC_NOCLKOUT
                      00026 
                      00027 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00028 ;*                    PAGINAÇÃO DE MEMÓRIA                         *
                      00029 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00030 ;DEFINIÇÃO DE COMANDOS DE USUÁRIO PARA ALTERAÇÃO DA PÁGINA DE MEMÓRIA
                      00031 #DEFINE BANK0   BCF STATUS,RP0  ;SETA BANK 0 DE MEMÓRIA
                      00032 #DEFINE BANK1   BSF STATUS,RP0  ;SETA BANK 1 DE MAMÓRIA
                      00033 
                      00034 
                      00035 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00036 ;*                         VARIÁVEIS                               *
                      00037 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00038 ; DEFINIÇÃO DOS NOMES E ENDEREÇOS DE TODAS AS VARIÁVEIS UTILIZADAS 
                      00039 ; PELO SISTEMA
                      00040 
                      00041         CBLOCK  0x20    ;ENDEREÇO INICIAL DA MEMÓRIA DE
                      00042                                         ;USUÁRIO
  00000020            00043                 W_TEMP          ;REGISTRADORES TEMPORÁRIOS PARA USO
MPASM 5.77                    TRACAO_OWP.ASM   10-11-2018  23:26:30         PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  00000021            00044                 STATUS_TEMP     ;JUNTO ÀS INTERRUPÇÕES
  00000022            00045                 COUNT_SYNC
                      00046                 
  00000023            00047                 DELAY_
  00000024            00048                 BYTE
                      00049                 
                      00050                 
  00000025            00051                 BITS
  00000026            00052                 CONT_START_SYNC_MASTER
  00000027            00053                 DELAY_SYNC
  00000028            00054                 MONITORA_BITS
                      00055                 
  00000029            00056                 DADO_LIDO
                      00057                 
  0000002A            00058                 CONT_2
  0000002B            00059                 CONT_1
  0000002C            00060                 BARRAMENTO ; REGISTRADOR DE DADOS SOBRE O BARRAMENTO
  0000002D            00061                 DADO_ENVIAR
  0000002E            00062                 VELOCIDADE
                      00063                 ;TRACAO
  0000002F            00064                 CONTADOR_START_SYNC
  00000030            00065                 PROPRIETARIO
  00000031            00066                 CONTADOR_START_BIT
  00000032            00067                 CONTADOR_BYTES
  00000033            00068                 CONTADOR_BITS
  00000034            00069                 ESTAGIO
  00000035            00070                 ENDERECO_ENVIAR
                      00071                 
                      00072                 
                      00073                 ;NOVAS VARIÁVEIS
                      00074 
                      00075         ENDC                    ;FIM DO BLOCO DE MEMÓRIA
                      00076                 
                      00077         CBLOCK  0x3A
  0000003A            00078                 BYTE_0
  0000003B            00079                 ENDERECO
  0000003C            00080                 DADO
                      00081         ENDC
                      00082         
                      00083         CBLOCK  0x3D
  0000003D            00084                 NVEL1
  0000003E            00085                 NVEL2
  0000003F            00086                 NVEL3
  00000040            00087                 NRE
  00000041            00088                 SVEL1
  00000042            00089                 SVEL2
  00000043            00090                 SVEL3
  00000044            00091                 SRE
                      00092         ;NOVAS VARIÁVEIS
                      00093 
                      00094         ENDC
                      00095         
                      00096         CBLOCK  0X45
MPASM 5.77                    TRACAO_OWP.ASM   10-11-2018  23:26:30         PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  00000045            00097             AUX_TEMPO_BAIXA_H
  00000046            00098             AUX_TEMPO_BAIXA_L
  00000047            00099             AUX_TEMPO_ALTA_H
  00000048            00100             AUX_TEMPO_ALTA_L
  00000049            00101             AUX_CONTADOR_BAIXA
  0000004A            00102             AUX_CONTADOR_ALTA
                      00103             
  0000004B            00104             F1_ALTA_H
  0000004C            00105             F1_ALTA_L
  0000004D            00106             F2_ALTA_H
  0000004E            00107             F2_ALTA_L
  0000004F            00108             F3_ALTA_H
  00000050            00109             F3_ALTA_L
  00000051            00110             RE_ALTA_H
  00000052            00111             RE_ALTA_L
  00000053            00112             F1_BAIXA_H
  00000054            00113             F1_BAIXA_L
  00000055            00114             F2_BAIXA_H
  00000056            00115             F2_BAIXA_L
  00000057            00116             F3_BAIXA_H
  00000058            00117             F3_BAIXA_L
  00000059            00118             RE_BAIXA_H
  0000005A            00119             RE_BAIXA_L
                      00120             
  0000005B            00121             TEMPO_ALTA_H
  0000005C            00122             TEMPO_ALTA_L
  0000005D            00123             TEMPO_BAIXA_H
  0000005E            00124             TEMPO_BAIXA_L          
                      00125         ENDC
                      00126 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00127 ;*                        FLAGS INTERNOS                           *
                      00128 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00129 ; DEFINIÇÃO DE TODOS OS FLAGS UTILIZADOS PELO SISTEMA
                      00130 #DEFINE FLAG_COL_START_BIT  BARRAMENTO, 3   ; BIT REFERENTE A COLISAO NO START_BIT
                      00131 #DEFINE FLAG_COL_ENVIAR_BIT BARRAMENTO, 4   ; BIT REFERENTE A COLISAO AO ENVIAR BIT
                      00132 #DEFINE FLAG_COLISAO        BARRAMENTO, 1   ; BIT REFERENTE A COLISAO
                      00133 #DEFINE FLAG_BYTE_0         ESTAGIO, 1      ; FLAG REFERENTE AO ESTAGIO DO BYTE_0
                      00134 #DEFINE FLAG_ENDERECO       ESTAGIO, 2      ; FLAG REFERENTE AO ESTAGIO DO ENDERECO
                      00135 #DEFINE FLAG_DADO           ESTAGIO, 3      ; FLAG REFERENTE AO ESTAGIO DO DADO
                      00136 #DEFINE VARIA_FREQUENCIA    .10             ; FLAG REFERENTE A 1% DO PERIODO DO PWM
                      00137 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00138 ;*                         CONSTANTES                              *
                      00139 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00140 ; DEFINIÇÃO DE TODAS AS CONSTANTES UTILIZADAS PELO SISTEMA
                      00141 
                      00142 ;A PARTIR DO ENDEREÇO ZERO DA EEPROM, DADOS EM ORDEM ALEATÓRIA
2100                  00143         ORG 0x2100
2100   0003 0004 0014 00144         DE      0X03,0X04,0X14,0X28,0X63,0X14,0X14,0X28,0X3C,0X14       ; VALORES FIXOS DO SUBSISTEMA DE
                             TRAÇÃO
       0028 0063 0014 
       0014 0028 003C 
       0014 
                      00145 ;                          20%  40%  99%
MPASM 5.77                    TRACAO_OWP.ASM   10-11-2018  23:26:30         PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00146 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00147 ;*                           ENTRADAS                              *
                      00148 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00149 ; DEFINIÇÃO DE TODOS OS PINOS QUE SERÃO UTILIZADOS COMO ENTRADA
                      00150 ; RECOMENDAMOS TAMBÉM COMENTAR O SIGNIFICADO DE SEUS ESTADOS (0 E 1)
                      00151 
                      00152 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00153 ;*                           SAÍDAS                                *
                      00154 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00155 ; DEFINIÇÃO DE TODOS OS PINOS QUE SERÃO UTILIZADOS COMO SAÍDA
                      00156 ; RECOMENDAMOS TAMBÉM COMENTAR O SIGNIFICADO DE SEUS ESTADOS (0 E 1)
                      00157 
                      00158 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00159 ;*                       VETOR DE RESET                            *
                      00160 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00161 
0000                  00162         ORG     0x00                    ;ENDEREÇO INICIAL DE PROCESSAMENTO
0000   293D           00163         GOTO    INICIO
                      00164         
                      00165 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00166 ;*                    INÍCIO DA INTERRUPÇÃO                        *
                      00167 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00168 ; ENDEREÇO DE DESVIO DAS INTERRUPÇÕES. A PRIMEIRA TAREFA É SALVAR OS
                      00169 ; VALORES DE "W" E "STATUS" PARA RECUPERAÇÃO FUTURA
                      00170 
0004                  00171         ORG     0x04                    ;ENDEREÇO INICIAL DA INTERRUPÇÃO
0004   00A0           00172         MOVWF   W_TEMP          ;COPIA W PARA W_TEMP
0005   0E03           00173         SWAPF   STATUS,W
0006   00A1           00174         MOVWF   STATUS_TEMP     ;COPIA STATUS PARA STATUS_TEMP
0007   110B           00175         BCF     INTCON, T0IF
                      00176         
                      00177         ;BSF    GPIO, GP4
                      00178 
                      00179 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00180 ;*                    ROTINA DE INTERRUPÇÃO                        *
                      00181 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00182 ; AQUI SERÁ ESCRITA AS ROTINAS DE RECONHECIMENTO E TRATAMENTO DAS
                      00183 ; INTERRUPÇÕES
0008   18AC           00184     BTFSC       FLAG_COLISAO
0009   280B           00185         GOTO    TRATAR_COLISAO
000A   2812           00186         GOTO    INICIO_START_SYNC
                      00187 
000B                  00188 TRATAR_COLISAO
000B   1DAC           00189         BTFSS       FLAG_COL_START_BIT
000C   2852           00190             GOTO    LER_BITS
000D   280E           00191             GOTO    INIC_CONT_START_SYNC
                      00192             
000E                  00193 INIC_CONT_START_SYNC
Message[305]: Using default destination of 1 (file).
000E   0AAF           00194         INCF    CONTADOR_START_SYNC
000F   309B           00195         MOVLW   .155
0010   0081           00196         MOVWF   TMR0
0011   2816           00197         GOTO    START_SYNC
MPASM 5.77                    TRACAO_OWP.ASM   10-11-2018  23:26:30         PAGE  5


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00198 ; INTERRUPÇÕES
0012                  00199 INICIO_START_SYNC
0012   3008           00200         MOVLW   .8
0013   00B3           00201         MOVWF   CONTADOR_BITS           ; TEM QUE TER ISSO PARA QUE O CONTADOR DE BITS COMECE COM SE NAO
                             ELE FICA PRESO NO LER BITS
0014   301E           00202         MOVLW   .30;.53;.55                 ; SERÁ VISTO QUANTAS VEZES O TIMER0 ESTOURARÁ
0015   0081           00203         MOVWF   TMR0
0016                  00204 START_SYNC
0016   180C           00205         BTFSC   PIR1, TMR1IF            ; REFERENTE A ATUALIZAÇÃO DO PWM
0017   207C           00206             CALL    MUDA_TMR1
0018   1905           00207         BTFSC   GPIO, GP2
0019   2822           00208         GOTO    VERIFICA_SLAVER     ; QUANDO O GP2 DESCER, É TESTADO SE É SLAVE OU MASTER 
001A   190B           00209         BTFSC   INTCON, T0IF        ; VERIFICA SE HOUVE ESTOURO DO TIMER 0
001B   281D           00210         GOTO    INCREMENTA_LIMPA    ; INCREMENTA O CONTADOR DO START_SYNC
001C   2816           00211         GOTO    START_SYNC          ; SE NÃO, REINICIA
                      00212         
001D                  00213 INCREMENTA_LIMPA
001D   192F           00214         BTFSC   CONTADOR_START_SYNC, 2  ; VERIFICA E PASSOU DE 3 O INCREMTETO, SE SIM, SAI
001E   28AC           00215             GOTO        SAI_INT
Message[305]: Using default destination of 1 (file).
001F   0AAF           00216         INCF    CONTADOR_START_SYNC
0020   110B           00217         BCF     INTCON, T0IF
0021   2812           00218         GOTO    INICIO_START_SYNC
                      00219         
0022                  00220 VERIFICA_SLAVER
0022   303A           00221         MOVLW   0x3A                    ; ENDEREÇO APONTADO CASO SEJA SLAVE NA MEMORIA
0023   0084           00222         MOVWF   FSR                     ; PONTEIRO APONTANDO NO ENDEREÇO 0x30 NA MEMÓRIA RAM
0024   3003           00223         MOVLW   .3                      ; CONTADOR DE BYTES, REFERENTE AO BYTE 0, MELHORAR ESSE DADO
0025   00B2           00224         MOVWF   CONTADOR_BYTES
Message[305]: Using default destination of 1 (file).
0026   0BAF           00225         DECFSZ  CONTADOR_START_SYNC     ; DECREMENTA O CONTADOR E VERIFICA SE ELE É ZERO,
0027   282A           00226         GOTO    VERIFICA_MASTER         ; SE FOR ZERO, O TIMER ZERO ESTOUROU 1 VEZ SÓ, ENTÃO É SLAVE
                      00227         ;BSF    PROPRIETARIO, 0         ; BIT 0 REFERENTE AO SLAVER
0028   1030           00228         BCF     PROPRIETARIO, 0         ; LIMPA QUE NÃO É MASTER
                      00229         ;BSF    GPIO,GP4        
0029   282F           00230         GOTO    START_BIT_INICIO        ; INICIA A VERIFICAÇÃO DO START BIT
                      00231         
002A                  00232 VERIFICA_MASTER                         ; VERIFICA SE É MASTER
Message[305]: Using default destination of 1 (file).
002A   0BAF           00233         DECFSZ  CONTADOR_START_SYNC
002B   28AC           00234         GOTO    SAI_INT                 ; DEU PROBLEMA, NÃO É UM START_SUMC
002C   1430           00235         BSF     PROPRIETARIO, 0         ; REFERENTE AO MASTER
                      00236         ;BSF    GPIO,GP4
                      00237         ;MOVLW  0x3A
                      00238         ;MOVWF  FSR
                      00239         ;MOVLW  .4
                      00240         ;MOVWF  CONTADOR_BYTES
002D   1605           00241         BSF     GPIO, GP4;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
002E   282F           00242         GOTO    START_BIT_INICIO
                      00243 ;==================================================
002F                  00244 START_BIT_INICIO
                      00245 
                      00246         ;BSF    GPIO, GP5               ; CASO O BARRAMENTO NÃO SUBA, ELE FOI TRATADO ANTERIORMENTE NO S
MPASM 5.77                    TRACAO_OWP.ASM   10-11-2018  23:26:30         PAGE  6


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                            TART_SYNC. SE O BARRAMENTO FICAR EM LOW, TODO O BARRAMENTO ESTARA COM PROBLEMAS
002F   1D05           00247         BTFSS   GPIO, GP2               ; ESPERA O BARRAMENTO SUBIR
0030   282F           00248         GOTO    START_BIT_INICIO        
0031                  00249 START_BIT_CONFIGURA                     ; CONFIGURA O REINICIO DA CONTAGEM DO START BIT PARA O CONTADOR 
                            QUANDO O TIMER ZERO ESTOURAR
0031   110B           00250         BCF     INTCON, T0IF
0032   3091           00251         MOVLW   .145                    ; O TMR0 ESTOURARÁ A CADA 130 US
0033   0081           00252         MOVWF   TMR0
0034                  00253 START_BIT
0034   180C           00254         BTFSC   PIR1, TMR1IF            ; REFERENTE A ATUALIZAÇÃO DO PWM
0035   207C           00255             CALL    MUDA_TMR1
0036   1D05           00256         BTFSS   GPIO, GP2
0037   283F           00257         GOTO    VERIFICA_START_BIT
0038   190B           00258         BTFSC   INTCON, T0IF            ; VERIFICA SE O TIMER ZERO ESTOUROU
0039   283B           00259         GOTO    INCREMENTA_START_BIT    ; SE SIM, INCREMENTA O CONTADOR DO START BIT
003A   2834           00260         GOTO    START_BIT               ; SE NÃO, CONTINUA A CONTAGEM
003B                  00261 INCREMENTA_START_BIT
                      00262          ;BSF   GPIO, GP4
003B   18B1           00263         BTFSC   CONTADOR_START_BIT, 1   ; TESTA SE HOUVE MAIS DE UM ESTOURO DO TIMER0, SE SIM, SAI DA IN
                            TERRUÇÃO
003C   28AC           00264             GOTO        SAI_INT
Message[305]: Using default destination of 1 (file).
003D   0AB1           00265         INCF    CONTADOR_START_BIT      ; INCREMENTA O CONTADOR DO START BIT
003E   2831           00266         GOTO    START_BIT_CONFIGURA 
003F                  00267 VERIFICA_START_BIT
                      00268 
Message[305]: Using default destination of 1 (file).
003F   0BB1           00269         DECFSZ  CONTADOR_START_BIT      ; VERIFICA SE HOUVE APENAS UM ESTOURO NO TIMER 0 NA SUBIDA DO ST
                            ART BIT
0040   28AC           00270         GOTO    SAI_INT                 ; SE HOUVE MAIS DE 1 OU MENOS, NÃO CARACTERIZA UM START BIT E SA
                            I DA INTERRUPÇÃO
0041   2842           00271         GOTO    START_BIT_LOW_INICIO            ; SE HOUVE APENAS 1 ESTOURO, CONTINUA A VERIFICAÇÃO PARA
                             O TEMPO EM LOW
                      00272 
                      00273         
0042                  00274 START_BIT_LOW_INICIO                    ; CODIGO PARECIDO COM A VERIFICAÇÃO DO TEMPO EM ALTA DO START BI
                            T
                      00275         ; BSF   GPIO, GP4
0042   110B           00276         BCF     INTCON, T0IF            ; MAS AGORA É TESTADO COM O TEMPO EM LOW
0043   3091           00277         MOVLW   .145
0044   0081           00278         MOVWF   TMR0
0045                  00279 START_BIT_LOW
0045   1905           00280         BTFSC   GPIO, GP2
0046   28AC           00281         GOTO    SAI_INT                 
0047   190B           00282         BTFSC   INTCON, T0IF
0048   284A           00283         GOTO    ESPERA_SUBIDA_START_BIT
0049   2845           00284         GOTO    START_BIT_LOW
                      00285         
004A                  00286 ESPERA_SUBIDA_START_BIT
004A   110B           00287         BCF     INTCON, T0IF
004B   30E1           00288         MOVLW   .225                    ; O TMR0 ESTOURARÁ A CADA 130 US
004C   0081           00289         MOVWF   TMR0
004D                  00290 ESPERA_SUBIDA_ST        
MPASM 5.77                    TRACAO_OWP.ASM   10-11-2018  23:26:30         PAGE  7


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

004D   1905           00291         BTFSC   GPIO, GP2
004E   2852           00292         GOTO    LER_BITS
004F   190B           00293         BTFSC   INTCON, T0IF
0050   28AC           00294         GOTO    SAI_INT                 ; SE O BARRAMENTO NÃO SUBIR NO INTERVALO DE TEMPO DADO, NÃO CARA
                            CTERIZA UM START BIT
0051   284D           00295         GOTO    ESPERA_SUBIDA_ST
                      00296         
                      00297 ;====================================
0052                  00298 LER_BITS
                      00299         ;BSF    GPIO, GP2 ; APAGAR
0052   110B           00300         BCF     INTCON, T0IF            ; LIMPA A FLAG DE ESTOURO DO TIMER ZERO
0053   30E8           00301         MOVLW   .232;.234                       ; O TIMER ZERO ESTOURARÁ A CADA 30 US (BASE), QUANDO HOU
                            VER O ESTOURO, É VERIFICADO
0054   0081           00302         MOVWF   TMR0                    ; O ESTADO DO BARRAMENTO, SE O BARRAMENTO ESTIVER EM ALTA, SIGNI
                            FICA QUE O BARRAMENTO AINDA NÃO BAIXOU, OU SEJA, CARACTERIZA O BIT 1 (40(H)) > 30 US
0055   30F8           00303         MOVLW   .248
0056   00A8           00304         MOVWF   MONITORA_BITS
0057                  00305 LER_BITS_CONTINUA                       ; CASO O BARRAMENTO ESTEJA EM LOW, SIGNIFICA QUE O BARRAMENTO JÁ
                             FOI PARA LOW, OU SEJA, O BIT LIDO É O ZERO (20(H) + 10(L)) = 30 US
                      00306         ;BTFSS  GPIO, GP2
                      00307         ;GOTO   VERIFICA_1_0
                      00308         ;BTFSC  INTCON, T0IF            ; VERIFICA SE HOUVE ESTOURO DO TIMER ZERO
                      00309         ;GOTO   VERIFICA_1_0            ; VERIFICA SE O BIT LIDO É ZERO OU UM
Message[305]: Using default destination of 1 (file).
0057   0FA8           00310         INCFSZ  MONITORA_BITS           ; SE ESTOURAR, É SINAL QUE HOUVE ALGUM ERRO, E O PROGRAMA SAI
0058   285A           00311             GOTO    $+2
0059   28AC           00312             GOTO    SAI_INT
                      00313         
005A   1905           00314         BTFSC   GPIO, GP2
005B   2857           00315             GOTO        LER_BITS_CONTINUA
005C   285D           00316             GOTO        VERIFICA_1_0
                      00317         
                      00318         
                      00319         
                      00320 ;INCREMENTA_CONTADOR_BITS
                      00321 ;       INCF    CONTADOR_TEMPO_BITS
                      00322 ;       GOTO    LER_BITS
005D                  00323 VERIFICA_1_0                ; VERIFICA SE É O BIT 1 OU 0
005D   1D0B           00324         BTFSS   INTCON, T0IF    ;GPIO, GP2
005E   2860           00325         GOTO    BIT_0
005F   286A           00326         GOTO    BIT_1
                      00327 
0060                  00328 BIT_0
0060   1003           00329         BCF     STATUS, C
Message[305]: Using default destination of 1 (file).
0061   0D80           00330         RLF     INDF
                      00331         
                      00332         
                      00333         
Message[305]: Using default destination of 1 (file).
0062   0BB3           00334         DECFSZ  CONTADOR_BITS           ; DECREMENTA O CONTADOR DE BITS 
0063   2877           00335         GOTO    ESPERA_BIT_MUDAR_1      ; SE NÃO FOR ZERO, ESPERA O BIT ZERO TERMINAR NO BARRAMENTO PARA
                             LEITURA DO PRÓXIMO
MPASM 5.77                    TRACAO_OWP.ASM   10-11-2018  23:26:30         PAGE  8


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

Message[305]: Using default destination of 1 (file).
0064   0A84           00336         INCF    FSR                     ; SE ACABOU, INCREMENTA O PONTEIRO PARA O PROXIMO ENDEREÇO DE ME
                            MÓRIA
                      00337         
                      00338         ;BSF    CONTADOR_BITS, 3        ; COLOCO O VALOR 8 NO CONTADOR DE BITS QUE ANTES ESTAVA ZERADO
0065   3008           00339         MOVLW   .8
0066   00B3           00340         MOVWF   CONTADOR_BITS
                      00341         
Message[305]: Using default destination of 1 (file).
0067   0BB2           00342         DECFSZ  CONTADOR_BYTES          ; DECREMENTA O CONTADOR DE BYTES QUE TEM QUE SER LIDO
0068   2874           00343         GOTO    ESPERA_BIT_MUDAR        ; CASO NÃO SEJA ZERO, ESPERA O BIT ZERO TERMINAR NO BARRAMENTO P
                            ARA LEITURA DO PRÓXIMO
0069   2894           00344         GOTO    CONCLUIDA_LEITURA
                      00345         
                      00346 ;       BTFSC   BARRAMENTO, 6
                      00347 ;           GOTO    CONCLUIDA_LEITURA
                      00348 ;PASSA_BYTE_0
                      00349 ;       BSF     BARRAMENTO, 6           ; SINALIZA QUE O BYTE_0 JÁ FOI LIDO
                      00350 ;       DECF    BYTE_0, 1
                      00351 ;       MOVF    BYTE_0,W
                      00352 ;       MOVWF   CONTADOR_BYTES
                      00353 ;       ;GOTO   LER_BITS
                      00354         
                      00355 ;ESPERA_BIT_MUDAR               
                      00356 ;       BTFSS   GPIO, GP2
                      00357 ;       GOTO    ESPERA_BIT_MUDAR
                      00358 ;       GOTO    LER_BITS
                      00359         
                      00360 
006A                  00361 BIT_1
006A   1403           00362         BSF     STATUS, C
Message[305]: Using default destination of 1 (file).
006B   0D80           00363         RLF     INDF
                      00364 
                      00365         
                      00366         
                      00367         
Message[305]: Using default destination of 1 (file).
006C   0BB3           00368         DECFSZ  CONTADOR_BITS
006D   2877           00369         GOTO    ESPERA_BIT_MUDAR_1
Message[305]: Using default destination of 1 (file).
006E   0A84           00370         INCF    FSR
                      00371         ;BSF    GPIO, GP4
                      00372         
                      00373         ;BSF    CONTADOR_BITS, 3        ; COLOCO O VALOR 8 NO CONTADOR DE BITS QUE ANTES ESTAVA ZERADO
006F   3008           00374         MOVLW   .8
0070   00B3           00375         MOVWF   CONTADOR_BITS
                      00376         
Message[305]: Using default destination of 1 (file).
0071   0BB2           00377         DECFSZ  CONTADOR_BYTES
0072   2874           00378         GOTO    ESPERA_BIT_MUDAR
0073   2894           00379         GOTO    CONCLUIDA_LEITURA
                      00380         
MPASM 5.77                    TRACAO_OWP.ASM   10-11-2018  23:26:30         PAGE  9


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00381 ;       BTFSC   BARRAMENTO, 6
                      00382 ;           GOTO    CONCLUIDA_LEITURA
                      00383 ;;PASSA_BYTE_0
                      00384 ;       BSF     BARRAMENTO, 6           ; SINALIZA QUE O BYTE_0 JÁ FOI LIDO
                      00385 ;       DECF    BYTE_0, 1
                      00386 ;       MOVF    BYTE_0,W
                      00387 ;       MOVWF   CONTADOR_BYTES
                      00388 ;       ;GOTO   LER_BITS
                      00389         
0074                  00390 ESPERA_BIT_MUDAR
0074   1D05           00391         BTFSS   GPIO, GP2
0075   2874           00392         GOTO    $-1
0076   2852           00393         GOTO    LER_BITS
                      00394 ;------------------------------------------------------------------
0077                  00395 ESPERA_BIT_MUDAR_1                          ; REFERENTE QUANDO NÃO É O ULTIMO BIT ENVIADO, OU SEJA, TERA
                             MAIS TEMPO PARA TRATAR O PWM
0077   180C           00396         BTFSC   PIR1, TMR1IF
0078   207C           00397             CALL    MUDA_TMR1
                      00398             
0079   1D05           00399         BTFSS   GPIO, GP2
007A   2874           00400             GOTO        ESPERA_BIT_MUDAR
007B   2852           00401             GOTO        LER_BITS
007C                  00402 MUDA_TMR1
007C   100C           00403         BCF     PIR1, TMR1IF
007D   1A85           00404         BTFSC   GPIO, GP5                   ; UNICOS VALORES SERÃO 00 01 10 EM QUE 10 E 01 SERÁ PARA O T
                            EMPO EM ALTA E 00 TEMPO EM BAIXA
007E   288D           00405             GOTO    TEMPO_EM_BAIXA_1_INT
007F   1E05           00406         BTFSS   GPIO, GP4
0080   2882           00407             GOTO    TEMPO_EM_ALTA_1_INT
0081   288D           00408             GOTO    TEMPO_EM_BAIXA_1_INT
0082                  00409 TEMPO_EM_ALTA_1_INT
0082   1FAE           00410         BTFSS   VELOCIDADE, 7   ; O SUBSISTEMA ESTÁ EM FUNCIONAMENTO?
0083   0008           00411             RETURN
0084   182E           00412         BTFSC   VELOCIDADE, 0   ; SE NÃO TIVER EM RÉ, PULA
0085   1605           00413             BSF     GPIO, GP4
0086   1C2E           00414         BTFSS   VELOCIDADE, 0   ; SE TIVER EM RÉ, PULA
0087   1685           00415             BSF     GPIO, GP5
0088   085B           00416         MOVF    TEMPO_ALTA_H, W
0089   008F           00417         MOVWF   TMR1H
008A   085C           00418         MOVF    TEMPO_ALTA_L, W
008B   008E           00419         MOVWF   TMR1L
                      00420         ;GOTO   OK_TRATAMENTO_SAI
008C   0008           00421         RETURN
008D                  00422 TEMPO_EM_BAIXA_1_INT
008D   1205           00423         BCF     GPIO, GP4
008E   1285           00424         BCF     GPIO, GP5
008F   085D           00425         MOVF    TEMPO_BAIXA_H, W
0090   008F           00426         MOVWF   TMR1H
0091   085E           00427         MOVF    TEMPO_BAIXA_L, W
0092   008E           00428         MOVWF   TMR1L
0093   0008           00429         RETURN
                      00430 
                      00431 ;------------------------------------------------------------------
MPASM 5.77                    TRACAO_OWP.ASM   10-11-2018  23:26:30         PAGE 10


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0094                  00432 CONCLUIDA_LEITURA
0094   172C           00433         BSF     BARRAMENTO, 6   ; SINALIZA QUE A LEITURA FOI FINALIZADA
0095   1BBC           00434         BTFSC   DADO, 7
                      00435             ;GOTO    PASSA_DADO
0096   28A5           00436             GOTO    COLISAO
Message[305]: Using default destination of 1 (file).
0097   0BBB           00437         DECFSZ  ENDERECO        ; TESTA SE É O ENDEREÇO DO SUBSISTEMA DE COLISAO, SE FOR N QUERO 
0098   289A           00438             GOTO    $+2
0099   28A3           00439             GOTO    SAI_DAQUI
Message[305]: Using default destination of 1 (file).
009A   0ABB           00440         INCF    ENDERECO        ; RECOLOCA O NUMERO SUBTRAIDO ANTERIORMENTE
009B   1C30           00441         BTFSS   PROPRIETARIO, 0 ; É MASTER?
009C   28AC           00442             GOTO    SAI_INT
                      00443         ; TESTA SE O VALOR NO DADO É MENOR DO QUE 15 [ X0001XXX ] -> TRAÇÃO 
009D   3078           00444         MOVLW   B'01111000'     ; PASSA A MASCARA PARA O WORK PARA FAZER O AND
009E   053C           00445         ANDWF   DADO, 0         ; FAÇO O AND COM O DADO, PARA PEGAR SOMENTE OS BITS 3, 4, 5 E 6 E SALVAR
                             NO WORK O RESULTADO
009F   3A08           00446         XORLW   B'00001000'     ; FAÇO OUTRO XOR COM O WORK PARA CHECAR SE SOMENTE O BIT 3 É 1, CASO SEJ
                            A, O RESULTADO É ZERO
00A0   1D03           00447         BTFSS   STATUS, Z       ; TESTA SE O RESULTADO DEU ZERO
00A1   28AC           00448             GOTO    SAI_INT     ; SE NÃO DEU, O VALOR NÃO INTERESSA AO SUBSISTEMA DE TRAÇÃO
00A2   28A9           00449             GOTO    PASSA_DADO
00A3                  00450 SAI_DAQUI
Message[305]: Using default destination of 1 (file).
00A3   0ABB           00451             INCF    ENDERECO    ; INCREMENTA O ENDEREÇO PQ DECREMENTEI ANTERIORMENTE
                      00452             
00A4   28AC           00453             GOTO    SAI_INT 
00A5                  00454 COLISAO
00A5   3008           00455             MOVLW   0X08        ; PASSA O COMANDO DE PARAR PARA O DADO LIDO
00A6   00A9           00456             MOVWF   DADO_LIDO
00A7   16AC           00457             BSF     BARRAMENTO, 5       ; SINALIZA QUE HOUVE UM DADO PARA O SUBSISTEMA DE TRAÇÃO 
00A8   28AC           00458             GOTO    SAI_INT
00A9                  00459 PASSA_DADO                      ; CASO SEJA ZERO, O VALOR DO DADO É PASSADO PARA A VARIAVEL DADO_LIDO
00A9   083C           00460         MOVF    DADO, W
00AA   00A9           00461         MOVWF   DADO_LIDO       ; PASSA O DADO LIDO NO BARRAMENTO PARA A VARIAVEL DADO_LIDO
00AB   16AC           00462         BSF     BARRAMENTO, 5   ; SINALIZA QUE HOUVE UM DADO PARA O SUBSISTEMA DE TRAÇÃO
                      00463         
                      00464 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00465 ;*                 ROTINA DE SAÍDA DA INTERRUPÇÃO                  *
                      00466 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00467 ; OS VALORES DE "W" E "STATUS" DEVEM SER RECUPERADOS ANTES DE 
                      00468 ; RETORNAR DA INTERRUPÇÃO
                      00469 
00AC                  00470 SAI_INT
00AC   01AF           00471         CLRF    CONTADOR_START_SYNC
00AD   01B1           00472         CLRF    CONTADOR_START_BIT
00AE   108B           00473         BCF     INTCON, INTF            ; LIMPA QUE HOUVE INTERRUPÇÃO DO GP2
00AF   10AC           00474         BCF     BARRAMENTO, 1
00B0   10AC           00475         BCF     FLAG_COLISAO
00B1   11AC           00476         BCF     FLAG_COL_START_BIT
                      00477         ;BSF    BARRAMENTO, 5
                      00478         ;BCF    BARRAMENTO, 4
                      00479         ;BCF    BARRAMENTO, 2
MPASM 5.77                    TRACAO_OWP.ASM   10-11-2018  23:26:30         PAGE 11


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00B2   01B0           00480         CLRF    PROPRIETARIO
                      00481         ;BCF    GPIO, GP4
                      00482         
00B3   0E21           00483         SWAPF   STATUS_TEMP,W
00B4   0083           00484         MOVWF   STATUS          ;MOVE STATUS_TEMP PARA STATUS
00B5   0EA0           00485         SWAPF   W_TEMP,F
00B6   0E20           00486         SWAPF   W_TEMP,W        ;MOVE W_TEMP PARA W
00B7   0009           00487         RETFIE
                      00488 
                      00489 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00490 ;*                       ROTINAS E SUBROTINAS                      *
                      00491 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00492 ; CADA ROTINA OU SUBROTINA DEVE POSSUIR A DESCRIÇÃO DE FUNCIONAMENTO
                      00493 ; E UM NOME COERENTE ÀS SUAS FUNÇÕES.
                      00494         
                      00495 ;   F1 -> FRENTE, VELOCIDADE 1
                      00496 ;   F2 -> FRENTE, VELOCIDADE 2
                      00497 ;   F3 -> FRENTE, VELOCIDADE 3
                      00498 ;   RE -> RÉ, VELOCIDADE 1
                      00499 
                      00500 ;           TEMPO_ALTA_H
                      00501 ;           TEMPO_ALTA_L
                      00502 ;           TEMPO_BAIXA_H
                      00503 ;           TEMPO_BAIXA_L
                      00504         
00B8                  00505 TRATAR_DADO
00B8   138B           00506         BCF     INTCON, GIE
00B9   1BA9           00507         BTFSC   DADO_LIDO, 7
00BA   2920           00508             GOTO    PARAR
00BB   1929           00509         BTFSC   DADO_LIDO, 2
00BC   28C2           00510             GOTO    VERIFICA_RE_REQUESICAO
00BD   18A9           00511         BTFSC   DADO_LIDO, 1
00BE   28C5           00512             GOTO    VERIFICA_F2_F3
00BF   1829           00513         BTFSC   DADO_LIDO, 0
00C0   28C8           00514             GOTO    F1
00C1   2920           00515             GOTO    PARAR
                      00516 
00C2                  00517 VERIFICA_RE_REQUESICAO  ;CHECA SE É PRA IR PARA RÉ OU ESTA PEDINDO O ESTADO DA TRAÇÃO
00C2   1829           00518         BTFSC   DADO_LIDO, 0
00C3   2910           00519             GOTO    REQUISICAO
00C4   28FE           00520             GOTO    RE
                      00521             
00C5                  00522 VERIFICA_F2_F3   ; CHECA SE É F2 OU F3   
00C5   1829           00523         BTFSC   DADO_LIDO, 0
00C6   28EC           00524             GOTO    F3
00C7   28DA           00525             GOTO    F2
                      00526 ;--------------------------------------------------------------------
00C8                  00527 F1  ;TRATAR PARA QUE VÁ PARA FRENTE COM VELOCIDADE 1
                      00528         ; SETAR O PWM EM 30%
                      00529         ; SETAR O GP5
00C8   3082           00530         MOVLW   B'10000010'     ; O BIT 7 DE VELOCIDADE INDICA QUE O SUBSISTEMA ESTA LIGADO OU NÃO
00C9   00AE           00531         MOVWF   VELOCIDADE
                      00532         ;BSF    VELOCIDADE, 1
MPASM 5.77                    TRACAO_OWP.ASM   10-11-2018  23:26:30         PAGE 12


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00CA   1205           00533         BCF     GPIO, GP4   ; TEM QUE COLOCAR O GP4 EM LOW !!!
                      00534         
00CB   1E85           00535         BTFSS   GPIO, GP5
00CC   28CE           00536             GOTO    F1_PRA_ALTA
00CD   28D4           00537             GOTO    F1_PRA_BAIXA
00CE                  00538 F1_PRA_ALTA                 ; 5 MS EM ALTA
                      00539         ;BCF    INTCON, GIE
                      00540         ;MOVLW  B'11101100'
00CE   084B           00541         MOVF    F1_ALTA_H, W
                      00542         ;MOVWF  TMR1H
00CF   00DB           00543         MOVWF   TEMPO_ALTA_H
                      00544         ;MOVLW  B'01110111'
00D0   084C           00545         MOVF    F1_ALTA_L, W
                      00546         ;MOVWF  TMR1L
00D1   00DC           00547         MOVWF   TEMPO_ALTA_L
                      00548         ;BSF    INTCON, GIE
00D2   1685           00549         BSF     GPIO, GP5   ; COLOCA EM ALTA
                      00550         
00D3   2924           00551         GOTO    OK_TRATAMENTO
00D4                  00552 F1_PRA_BAIXA                ; 10 MS EM ALTA
                      00553         ;MOVLW  B'11011000'
                      00554         ;BCF    INTCON, GIE
00D4   0853           00555         MOVF    F1_BAIXA_H, W
                      00556         ;MOVWF  TMR1H
00D5   00DD           00557         MOVWF   TEMPO_BAIXA_H
                      00558         ;MOVLW  B'11101111'
00D6   0854           00559         MOVF    F1_BAIXA_L, W
                      00560         ;MOVWF  TMR1L
00D7   00DE           00561         MOVWF   TEMPO_BAIXA_L
                      00562         ;BSF    INTCON, GIE
                      00563         
00D8   1285           00564         BCF     GPIO, GP5   ; COLOCA EM BAIXA
                      00565         
00D9   2924           00566         GOTO    OK_TRATAMENTO
                      00567 ;--------------------------------------------------------------------
00DA                  00568 F2                          ;TRATAR PARA QUE VÁ PARA FRENTE COM VELOCIDADE 2
                      00569         ; SETAR O PWM EM 60%
                      00570         ; SETAR O GP5
00DA   3084           00571         MOVLW   B'10000100'         ; O BIT 7 DE VELOCIDADE INDICA QUE O SUBSISTEMA ESTA LIGADO OU NÃO
00DB   00AE           00572         MOVWF   VELOCIDADE
                      00573         ;BSF    VELOCIDADE, 2
00DC   1205           00574         BCF     GPIO, GP4   ; TEM QUE COLOCAR O GP4 EM LOW !!!
                      00575         
00DD   1E85           00576         BTFSS   GPIO, GP5
00DE   28E0           00577             GOTO    F2_PRA_ALTA
00DF   28E6           00578             GOTO    F2_PRA_BAIXA
00E0                  00579 F2_PRA_ALTA                 ; 10 MS EM ALTA
                      00580         ;BCF    GIE, INTCON  ; TESTE DA INTERRUPÇÃO
                      00581         ;MOVLW  B'11011000'
                      00582         ;BCF    INTCON, GIE
00E0   084D           00583         MOVF    F2_ALTA_H, W
                      00584         ;MOVWF  TMR1H
00E1   00DB           00585         MOVWF   TEMPO_ALTA_H
MPASM 5.77                    TRACAO_OWP.ASM   10-11-2018  23:26:30         PAGE 13


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00586         ;MOVLW  B'11101111'
00E2   084E           00587         MOVF    F2_ALTA_L, W
                      00588         ;MOVWF  TMR1L
00E3   00DC           00589         MOVWF   TEMPO_ALTA_L
                      00590         ;BSF    INTCON, GIE
                      00591         
00E4   1685           00592         BSF     GPIO, GP5   ; COLOCA EM ALTA
                      00593         ;BSF    GIE, INTCON
00E5   2924           00594         GOTO    OK_TRATAMENTO
00E6                  00595 F2_PRA_BAIXA                ; 5 MS EM ALTA
                      00596         ;BCF    GIE, INTCON
                      00597         ;MOVLW  B'11101100'
                      00598         ;BCF    INTCON, GIE 
00E6   0855           00599         MOVF    F2_BAIXA_H, W
                      00600         ;MOVWF  TMR1H
00E7   00DD           00601         MOVWF   TEMPO_BAIXA_H
                      00602         ;MOVLW  B'01110111'
00E8   0856           00603         MOVF    F2_BAIXA_L, W
                      00604         ;MOVWF  TMR1L
00E9   00DE           00605         MOVWF   TEMPO_BAIXA_L
                      00606         ;BSF    INTCON, GIE
                      00607         
00EA   1285           00608         BCF     GPIO, GP5   ; COLOCA EM BAIXA
                      00609         ;BSF    GIE, INTCON
00EB   2924           00610         GOTO    OK_TRATAMENTO
                      00611 ;--------------------------------------------------------------------
00EC                  00612 F3  ;TRATAR PARA QUE VÁ PARA FRENTE COM VELOCIDADE 3
                      00613         ; SETAR O PWM EM 100%
                      00614         ; SETAR O GP5
00EC   3088           00615         MOVLW   B'10001000'         ; O BIT 7 DE VELOCIDADE INDICA QUE O SUBSISTEMA ESTA LIGADO OU NÃO
00ED   00AE           00616         MOVWF   VELOCIDADE
                      00617         ;BSF    VELOCIDADE, 3
00EE   1205           00618         BCF     GPIO, GP4   ; TEM QUE COLOCAR O GP4 EM LOW !!!
                      00619         
00EF   1E85           00620         BTFSS   GPIO, GP5
00F0   28F2           00621             GOTO    F3_PRA_ALTA
00F1   28F8           00622             GOTO    F3_PRA_BAIXA
00F2                  00623 F3_PRA_ALTA                 ; 10 MS EM ALTA
                      00624         ;BCF    INTCON,GIE  ; TESTE DA INTERRUPÇÃO
                      00625         ;BCF    INTCON, GIE
                      00626         ;MOVLW  B'11011000'
00F2   084F           00627         MOVF    F3_ALTA_H, W
                      00628         ;MOVWF  TMR1H
00F3   00DB           00629         MOVWF   TEMPO_ALTA_H
                      00630         ;MOVLW  B'11101111'
00F4   0850           00631         MOVF    F3_ALTA_L, W
                      00632         ;MOVWF  TMR1L
00F5   00DC           00633         MOVWF   TEMPO_ALTA_L
                      00634         ;BSF    INTCON, GIE
                      00635         
00F6   1685           00636         BSF     GPIO, GP5   ; COLOCA EM ALTA
                      00637         ;BSF    GIE, INTCON
00F7   2924           00638         GOTO    OK_TRATAMENTO
MPASM 5.77                    TRACAO_OWP.ASM   10-11-2018  23:26:30         PAGE 14


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00F8                  00639 F3_PRA_BAIXA                ; 5 MS EM ALTA
                      00640         ;BCF    INTCON,GIE
                      00641         ;MOVLW  B'11101100'
00F8   0857           00642         MOVF    F3_BAIXA_H, W
                      00643         ;MOVWF  TMR1H
00F9   00DD           00644         MOVWF   TEMPO_BAIXA_H
                      00645         ;MOVLW  B'01110111'
00FA   0858           00646         MOVF    F3_BAIXA_L, W
                      00647         ;MOVWF  TMR1L
00FB   00DE           00648         MOVWF   TEMPO_BAIXA_L
                      00649         ;BSF    INTCON, GIE
                      00650         
00FC   1285           00651         BCF     GPIO, GP5   ; COLOCA EM BAIXA
                      00652         ;BSF    GIE, INTCON
00FD   2924           00653         GOTO    OK_TRATAMENTO
                      00654 ;--------------------------------------------------------------------
00FE                  00655 RE  ;TRATAR PARA QUE FAÇA RÉ COM VELOCIDADE 1
                      00656         ; SETAR O PWM IGUAL AO DO F1 EM 30%
                      00657         ; SETAR O GP4
00FE   3081           00658         MOVLW   B'10000001'         ; O BIT 7 DE VELOCIDADE INDICA QUE O SUBSISTEMA ESTA LIGADO OU NÃO
00FF   00AE           00659         MOVWF   VELOCIDADE
                      00660         ;BSF    VELOCIDADE, 0
0100   1285           00661         BCF     GPIO, GP5   ; TEM QUE COLOCAR O GP5 EM LOW !!!!
                      00662         
0101   1E05           00663         BTFSS   GPIO, GP4
0102   2904           00664             GOTO    RE_PRA_ALTA
0103   290A           00665             GOTO    RE_PRA_BAIXA
0104                  00666 RE_PRA_ALTA                 ; 5 MS EM ALTA
                      00667         ;MOVLW  B'11101100' ; RE_ALTA_H
                      00668         ;BCF    INTCON, GIE
0104   0851           00669         MOVF    RE_ALTA_H, W
                      00670         ;MOVWF  TMR1H
0105   00DB           00671         MOVWF   TEMPO_ALTA_H
                      00672         ;MOVLW  B'01110111' ; RE_ALTA_L
0106   0852           00673         MOVF    RE_ALTA_L, W
                      00674         ;MOVWF  TMR1L
0107   00DC           00675         MOVWF   TEMPO_ALTA_L
                      00676         ;BSF    INTCON, GIE
                      00677         
0108   1605           00678         BSF     GPIO, GP4   ; COLOCA EM ALTA
                      00679         
0109   2924           00680         GOTO    OK_TRATAMENTO
010A                  00681 RE_PRA_BAIXA                ; 10 MS EM ALTA
                      00682         ;MOVLW  B'11011000'
                      00683         ;BCF    INTCON, GIE
010A   0859           00684         MOVF    RE_BAIXA_H, W
                      00685         ;MOVWF  TMR1H
010B   00DD           00686         MOVWF   TEMPO_BAIXA_H
                      00687         ;MOVLW  B'11101111'
010C   085A           00688         MOVF    RE_BAIXA_L, W
                      00689         ;MOVWF  TMR1L
010D   00DE           00690         MOVWF   TEMPO_BAIXA_L
                      00691         ;BSF    INTCON, GIE
MPASM 5.77                    TRACAO_OWP.ASM   10-11-2018  23:26:30         PAGE 15


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00692         
010E   1205           00693         BCF     GPIO, GP4   ; COLOCA EM BAIXA
                      00694         
010F   2924           00695         GOTO    OK_TRATAMENTO
                      00696 ;--------------------------------------------------------------------
0110                  00697 REQUISICAO
                      00698         ; TRATAR O DADO DE GP4 E GP5 E ENVIAR NO BARRAMENTO
0110   1EAC           00699         BTFSS   BARRAMENTO, 5   ; VERIFICA SE O DADO JÁ FOI ENVIADO OU NÃO
0111   2924           00700             GOTO    OK_TRATAMENTO   ; SE JÁ FOI, NÃO ENVIA
0112   3008           00701         MOVLW   B'00001000'
0113   182E           00702         BTFSC   VELOCIDADE, 0   ; TESTA SE ESTÁ EM RÉ
0114   300C           00703             MOVLW   B'00001100'
0115   18AE           00704         BTFSC   VELOCIDADE, 1   ; TESTA SE ESTÁ EM F1
0116   3009           00705             MOVLW   B'00001001'    
0117   192E           00706         BTFSC   VELOCIDADE, 2   ; TESTA SE ESTÁ EM F2
0118   300A           00707             MOVLW   B'00001010'
0119   19AE           00708         BTFSC   VELOCIDADE, 3   ; TESTA SE ESTÁ EM F3
011A   300B           00709             MOVLW   B'00001011'
                      00710             
011B   00AD           00711         MOVWF   DADO_ENVIAR
011C   00A9           00712         MOVWF   DADO_LIDO       ; RECOLOCO O VALOR QUE ESTAVA NO SUBSISTEMA PARA ELE CONTINUAR E NÃO PAR
                            AR
                      00713         
                      00714         ;BCF    PIR1, TMR1IF    ; LIMPA A FLAG DO TIMER1
                      00715         
011D   12AC           00716         BCF     BARRAMENTO, 5   ; SINALIZA QUE FOI TRATADO O DADO
                      00717         
011E   21A4           00718         CALL    VERIFICA_BARRAMENTO
011F   29B2           00719         GOTO    ENVIA_DADOS
                      00720         ;GOTO    MAIN
                      00721 ;--------------------------------------------------------------------
0120                  00722 PARAR
0120   01AE           00723         CLRF    VELOCIDADE
0121   1005           00724         BCF     GPIO, 0     ; LIMPANDO AS DUAS PORTAS, O CARRO PARA
0122   1085           00725         BCF     GPIO, 1
0123   2924           00726         GOTO    OK_TRATAMENTO
                      00727 ;--------------------------------------------------------------------
0124                  00728 OK_TRATAMENTO
0124   1A85           00729         BTFSC   GPIO, GP5                   ; UNICOS VALORES SERÃO 00 01 10 EM QUE 10 E 01 SERÁ PARA O T
                            EMPO EM ALTA E 00 TEMPO EM BAIXA
0125   2929           00730             GOTO    TEMPO_EM_ALTA_1
0126   1E05           00731         BTFSS   GPIO, GP4
0127   292E           00732             GOTO    TEMPO_EM_BAIXA_1
0128   2929           00733             GOTO    TEMPO_EM_ALTA_1
0129                  00734 TEMPO_EM_ALTA_1
0129   085B           00735         MOVF    TEMPO_ALTA_H, W
012A   008F           00736         MOVWF   TMR1H
012B   085C           00737         MOVF    TEMPO_ALTA_L, W
012C   008E           00738         MOVWF   TMR1L
012D   2932           00739         GOTO    OK_TRATAMENTO_SAI
                      00740         
012E                  00741 TEMPO_EM_BAIXA_1
012E   085D           00742         MOVF    TEMPO_BAIXA_H, W
MPASM 5.77                    TRACAO_OWP.ASM   10-11-2018  23:26:30         PAGE 16


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

012F   008F           00743         MOVWF   TMR1H
0130   085E           00744         MOVF    TEMPO_BAIXA_L, W
0131   008E           00745         MOVWF   TMR1L
0132                  00746 OK_TRATAMENTO_SAI
                      00747         
0132   178B           00748         BSF     INTCON, GIE
                      00749         ;BTFSS  PIR1, TMR1IF
                      00750          ;   GOTO    MAIN
0133   100C           00751         BCF     PIR1, TMR1IF    ; LIMPA A FLAG DO TIMER1
0134   12AC           00752         BCF     BARRAMENTO, 5   ; SINALIZA QUE O TRATAMENTO DO DADO JÁ OCORREU
0135   299E           00753         GOTO    MAIN
0136                  00754 LE_EEPROM
                      00755 ;LER DADO DA EEPROM, CUJO ENDEREÇO É INDICADO EM W
                      00756 ;DADO LIDO RETORNA EM W
0136   397F           00757         ANDLW   .127            ;LIMITA ENDEREÇO MAX. 127
0137   1683           00758         BANK1                           ;ACESSO VIA BANK 1
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0138   009B           00759         MOVWF   EEADR           ;INDICA O END. DE LEITURA
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0139   141C           00760         BSF             EECON1,RD       ;INICIA O PROCESSO DE LEITURA
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
013A   081A           00761         MOVF    EEDATA,W        ;COLOCA DADO LIDO EM W
013B   1283           00762         BANK0                           ;POSICIONA PARA BANK 0
013C   0008           00763         RETURN
                      00764 
                      00765 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00766 ;*                     INICIO DO PROGRAMA                          *
                      00767 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00768         
013D                  00769 INICIO
013D   1683           00770         BANK1                           ;ALTERA PARA O BANCO 1
013E   300C           00771         MOVLW   B'00001100' ;CONFIGURA TODAS AS PORTAS DO GPIO (PINOS)
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
013F   0085           00772         MOVWF   TRISIO          ;COMO SAÍDAS
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0140   019F           00773         CLRF    ANSEL           ;DEFINE PORTAS COMO Digital I/O
0141   3008           00774         MOVLW   B'00001000'
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0142   0081           00775         MOVWF   OPTION_REG      ;DEFINE OPÇÕES DE OPERAÇÃO
                      00776         ;MOVLW  B'11010000'
                      00777         ;MOVWF  INTCON          ;DEFINE OPÇÕES DE INTERRUPÇÕES
0143   23FF           00778         CALL    0x3FF
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0144   0090           00779         MOVWF   OSCCAL
0145   1283           00780         BANK0                   ;RETORNA PARA O BANCO
                      00781         
0146   3001           00782         MOVLW   B'00000001'
0147   0090           00783         MOVWF   T1CON                   ; HABILITANDO O TIMER 1
                      00784         
0148   3007           00785         MOVLW   B'00000111'
0149   0099           00786         MOVWF   CMCON           ;DEFINE O MODO DE OPERAÇÃO DO COMPARADOR ANALÓGICO
014A   0185           00787         CLRF    GPIO
014B   3000           00788         MOVLW   .0
MPASM 5.77                    TRACAO_OWP.ASM   10-11-2018  23:26:30         PAGE 17


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

014C   0081           00789         MOVWF   TMR0
014D   108B           00790         BCF     INTCON, INTF 
                      00791 
                      00792 
014E   1485           00793         BSF     GPIO, GP1
014F   3009           00794         MOVLW   .9
0150   00A5           00795         MOVWF   BITS
                      00796         
0151   3000           00797         MOVLW   .0
0152   2136           00798         CALL    LE_EEPROM
0153   00BA           00799         MOVWF   BYTE_0
                      00800         
0154   3001           00801         MOVLW   .1
0155   2136           00802         CALL    LE_EEPROM
0156   00BB           00803         MOVWF   ENDERECO
                      00804         
0157   3002           00805         MOVLW   .2
0158   2136           00806         CALL    LE_EEPROM
0159   00BD           00807         MOVWF   NVEL1
                      00808         
015A   3003           00809         MOVLW   .3
015B   2136           00810         CALL    LE_EEPROM
015C   00BE           00811         MOVWF   NVEL2
                      00812         
015D   3004           00813         MOVLW   .4
015E   2136           00814         CALL    LE_EEPROM
015F   00BF           00815         MOVWF   NVEL3
                      00816         
0160   3005           00817         MOVLW   .5
0161   2136           00818         CALL    LE_EEPROM
0162   00C0           00819         MOVWF   NRE
                      00820         
0163   3006           00821         MOVLW   .6
0164   2136           00822         CALL    LE_EEPROM
0165   00C1           00823         MOVWF   SVEL1
                      00824         
0166   3007           00825         MOVLW   .7
0167   2136           00826         CALL    LE_EEPROM
0168   00C2           00827         MOVWF   SVEL2
                      00828         
0169   3008           00829         MOVLW   .8
016A   2136           00830         CALL    LE_EEPROM
016B   00C3           00831         MOVWF   SVEL3
                      00832         
016C   3009           00833         MOVLW   .9
016D   2136           00834         CALL    LE_EEPROM
016E   00C4           00835         MOVWF   SRE
                      00836         
016F   300B           00837         MOVLW   .11
0170   00A9           00838         MOVWF   DADO_LIDO
                      00839         ;MOVLW  B'00000001'
                      00840         ;MOVWF  DADOS
                      00841         
MPASM 5.77                    TRACAO_OWP.ASM   10-11-2018  23:26:30         PAGE 18


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00842         ; TEMPO PARA F1
0171   083D           00843         MOVF    NVEL1, W        ; VALOR ENTRE 0 E 100%
0172   2273           00844         CALL    INICIALIZA_CONTADORES
                      00845         
0173   0847           00846         MOVF    AUX_TEMPO_ALTA_H,  W
0174   00CB           00847         MOVWF   F1_ALTA_H
0175   0848           00848         MOVF    AUX_TEMPO_ALTA_L,  W
0176   00CC           00849         MOVWF   F1_ALTA_L
                      00850         
0177   0845           00851         MOVF    AUX_TEMPO_BAIXA_H, W
0178   00D3           00852         MOVWF   F1_BAIXA_H
0179   0846           00853         MOVF    AUX_TEMPO_BAIXA_L, W
017A   00D4           00854         MOVWF   F1_BAIXA_L
                      00855         ; TEMPO PARA F2
017B   083E           00856         MOVF    NVEL2, W        ; VALOR ENTRE 0 E 100%
017C   2273           00857         CALL    INICIALIZA_CONTADORES
                      00858         
017D   0847           00859         MOVF    AUX_TEMPO_ALTA_H,  W
017E   00CD           00860         MOVWF   F2_ALTA_H
017F   0848           00861         MOVF    AUX_TEMPO_ALTA_L,  W
0180   00CE           00862         MOVWF   F2_ALTA_L
                      00863         
0181   0845           00864         MOVF    AUX_TEMPO_BAIXA_H, W
0182   00D5           00865         MOVWF   F2_BAIXA_H
0183   0846           00866         MOVF    AUX_TEMPO_BAIXA_L, W
0184   00D6           00867         MOVWF   F2_BAIXA_L
                      00868         ; TEMPO PARA F3
0185   083F           00869         MOVF    NVEL3, W        ; VALOR ENTRE 0 E 100%
0186   2273           00870         CALL    INICIALIZA_CONTADORES
                      00871         
0187   0847           00872         MOVF    AUX_TEMPO_ALTA_H,  W
0188   00CF           00873         MOVWF   F3_ALTA_H
0189   0848           00874         MOVF    AUX_TEMPO_ALTA_L,  W
018A   00D0           00875         MOVWF   F3_ALTA_L
                      00876         
018B   0845           00877         MOVF    AUX_TEMPO_BAIXA_H, W
018C   00D7           00878         MOVWF   F3_BAIXA_H
018D   0846           00879         MOVF    AUX_TEMPO_BAIXA_L, W
018E   00D8           00880         MOVWF   F3_BAIXA_L
                      00881         ; TEMPO PARA NRE
018F   0840           00882         MOVF    NRE, W  ; VALOR ENTRE 0 E 100%
0190   2273           00883         CALL    INICIALIZA_CONTADORES
                      00884         
0191   0847           00885         MOVF    AUX_TEMPO_ALTA_H,  W
0192   00D1           00886         MOVWF   RE_ALTA_H
0193   0848           00887         MOVF    AUX_TEMPO_ALTA_L,  W
0194   00D2           00888         MOVWF   RE_ALTA_L
                      00889         
0195   0845           00890         MOVF    AUX_TEMPO_BAIXA_H, W
0196   00D9           00891         MOVWF   RE_BAIXA_H
0197   0846           00892         MOVF    AUX_TEMPO_BAIXA_L, W
0198   00DA           00893         MOVWF   RE_BAIXA_L
                      00894         
MPASM 5.77                    TRACAO_OWP.ASM   10-11-2018  23:26:30         PAGE 19


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00895         
                      00896 ;       NVEL1
                      00897 ;       NVEL2
                      00898 ;       NVEL3
                      00899 ;       NRE
                      00900 ;       SVEL1
                      00901 ;       SVEL2
                      00902 ;       SVEL3
                      00903 ;       SRE
                      00904         ;MOVWF  SBYTE_0
                      00905         
                      00906         ;MOVLW  B'00011110'
                      00907         ;MOVWF  DADO_SLAVER
                      00908         
                      00909         
                      00910         ;BCF    GPIO, GP4   ;APENAS PARA SIMULAÇÃO, APAGAR AQUI <----
                      00911 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00912 ;*                     INICIALIZAÇÃO DAS VARIÁVEIS                 *
                      00913 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
0199   2268           00914     CALL DELAY100MS
019A   2268           00915     CALL DELAY100MS
019B   30D0           00916     MOVLW       B'11010000'     ; HABILITA A INTERRUPÇÃO APOS ENVIAR OS DADOS
019C   008B           00917     MOVWF       INTCON
019D   28B8           00918     GOTO TRATAR_DADO
                      00919 
                      00920 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00921 ;*                     ROTINA PRINCIPAL                            *
                      00922 ;* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
                      00923 ; GP4 -> RÉ
                      00924 ; GP5 -> FRENTE
                      00925 ; GP2 -> LER O BARRAMENTO
                      00926 ; GP1 -> ENVIA NO BARRAMENTO
                      00927 
                      00928 ;   CONTADOR_BITS, 3    ; COLOCO O VALOR 8 NO CONTADOR DE BITS QUE ANTES ESTAVA ZERADO
                      00929 ;   CONTADOR_BYTES
                      00930 ;   DADOS_ENVIAR
                      00931 ;   ENDERECO_ENVIAR
019E                  00932 MAIN
                      00933 
019E   01B4           00934         CLRF    ESTAGIO
                      00935         
                      00936         ;BTFSC  BARRAMENTO, 5           ; TESTA SE TEM DADO PARA O SUBSISTEMA DE TRAÇÃO
                      00937         ;    GOTO    TRATAR_DADO                ; SOMENTE PARA QUE NÃO FIQUE ENVIANDO O DADO NO BARRAMEN
                            TO MAIS DE UMA VEZ
                      00938             
019F   180C           00939         BTFSC   PIR1, TMR1IF            ; VERIFICA SE HOUVE ESTOURO DO TIMER1
01A0   28B8           00940             GOTO        TRATAR_DADO     
                      00941 
                      00942 
                      00943         ;CALL   VERIFICA_BARRAMENTO ;   LER BARRAMENTO PARA SABER SE ESTÁ OCUPADO OU NÃO
                      00944         ;GOTO   ENVIA_DADOS
01A1   299E           00945         GOTO    MAIN
                      00946         
MPASM 5.77                    TRACAO_OWP.ASM   10-11-2018  23:26:30         PAGE 20


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

01A2                  00947 FIM_ENVIA_DADOS
                      00948         ;MOVLW  B'11010000'     ; HABILITA A INTERRUPÇÃO APOS ENVIAR OS DADOS
01A2   178B           00949         BSF     INTCON, GIE
                      00950 
01A3   299E           00951         GOTO    MAIN
                      00952         
                      00953         
                      00954 ;=============================================================
01A4                  00955 VERIFICA_BARRAMENTO             ; VERIFICO SE O BARRAMENTO ESTÁ LIVRE POR 200 US
                      00956         ;MOVLW  B'11010000'     ; HABILITA A INTERRUPÇÃO
                      00957         ;MOVWF  INTCON          ;DEFINE OPÇÕES DE INTERRUPÇÕES
01A4   178B           00958         BSF     INTCON, GIE
01A5   110B           00959         BCF     INTCON, T0IF
01A6   12AC           00960         BCF     BARRAMENTO, 5   ; LIMPA O SINALIZADOR DE LEITURA DO BARRAMENTO
                      00961         ; TESTA SE O VALOR LIDO É REFERENTE AO STOP DA COLISAO
                      00962         ;   SE FOR, TRATAR ESSE DADO
01A7   3028           00963         MOVLW   .40;.100
01A8   0081           00964         MOVWF   TMR0
01A9   1D05           00965         BTFSS   GPIO, GP2               ; VERIFICA SE O BARRAMENTO ESTÁ EM LOW
01AA   29A4           00966          GOTO   VERIFICA_BARRAMENTO
                      00967         
01AB                  00968 VERIFICA_BARRAMENTO_0
                      00969 
01AB   1D05           00970         BTFSS   GPIO, GP2               ; VERIFICA SE O BARRAMENTO ESTÁ EM LOW
01AC   29A4           00971          GOTO   VERIFICA_BARRAMENTO
01AD   1D0B           00972         BTFSS   INTCON, T0IF
01AE   29AB           00973         GOTO    VERIFICA_BARRAMENTO_0
01AF   1EAC           00974         BTFSS   BARRAMENTO, 5   ; HOUVE UMA LEITURA NO BARRAMENTO? ESSA VERIFICAÇÃO DEVE SER FEITA POR U
                            LTIMO
01B0   0008           00975         RETURN 
01B1   29A4           00976         GOTO    VERIFICA_BARRAMENTO
                      00977 ;=============================================================
01B2                  00978 ENVIA_DADOS
                      00979 
                      00980 
01B2   138B           00981               BCF       INTCON, GIE             ; DESABILITA AS INTERRUPÇÕES
01B3   130B           00982               BCF       INTCON, PEIE
01B4   120B           00983               BCF       INTCON, INTE
                      00984               
01B5   0835           00985               MOVF      ENDERECO_ENVIAR, W  ;   MOVO O ENDEREÇO DO SUBSISTEMA QUE ENVIARÁ DOS DADOS
01B6   00BB           00986               MOVWF     ENDERECO            ;   PARA O ENDEREÇO QUE SERÁ LIDO
                      00987               
                      00988              
01B7   082D           00989               MOVF      DADO_ENVIAR, W      ; SEPARA O DADO QUE FOI REQUISITADO PARA ENVIAR
01B8   00BC           00990               MOVWF     DADO
                      00991               
01B9   3003           00992               MOVLW     0X03
01BA   00BA           00993               MOVWF     BYTE_0
                      00994         
01BB   303F           00995             MOVLW       0x3F                    ; ENDEREÇO APONTADO PARA O ENREREÇO RESERVADO PARA LEITU
                            RA DOS DADOS 
                      00996                                                 ; PARA SER INCREMENTADO POR IGUAL NO ENVIO DOS BYTES
01BC   0084           00997             MOVWF       FSR                     ; PONTEIRO
MPASM 5.77                    TRACAO_OWP.ASM   10-11-2018  23:26:30         PAGE 21


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

01BD   3003           00998             MOVLW       .3
01BE   00B2           00999             MOVWF       CONTADOR_BYTES
                      01000             
01BF   1D05           01001             BTFSS       GPIO, GP2               ; TESTE
01C0   299E           01002                GOTO     MAIN
                      01003                
01C1   2255           01004             CALL        START_SYNC_SLAVE        ; PASSA 250 US EM BAIXA, NÃO NECESSITA VERIFICAR COLISÃO
01C2   29DF           01005             GOTO        START_BIT_ENVIA
01C3                  01006 FIM_START_BIT
Message[305]: Using default destination of 1 (file).
01C3   0A84           01007                 INCF    FSR                 ; VALOR INCREMENTADO DO PONTEIRO, PARA QUE EM TODOS OS TEMPO
                            S SEJAM IGUAIS
                      01008         ;BSF    CONTADOR_BITS, 3        ; COLOCO O VALOR 8 NO CONTADOR DE BITS QUE ANTES ESTAVA ZERADO
01C4   3008           01009         MOVLW   .8
01C5   00B3           01010         MOVWF   CONTADOR_BITS
01C6   14B4           01011                 BSF     ESTAGIO, 1          ; SINALIZA QUE É O ENVIO DO BYTE 0
01C7   2A13           01012                 GOTO    ENVIA_BYTE          ; O VALOR QUE ESTIVER NO WORK, SERÁ ENVIADO
01C8                  01013 FIM_BYTE_0
01C8   0000           01014                 NOP
01C9   0000           01015                 NOP
                      01016                 ;NOP
Message[305]: Using default destination of 1 (file).
01CA   0D80           01017                 RLF     INDF                ; ULTIMO ROTATE PARA QUE PEGAR O VALOR QUE ESTAVA NO CARRY E
                             DEIXAR ORIGINAL
Message[305]: Using default destination of 1 (file).
01CB   03B2           01018                 DECF    CONTADOR_BYTES      ; DECREMENTA O CONTADOR DE BYTES TODA VEZ QUE É ENVIADO UM B
                            YTE
Message[305]: Using default destination of 1 (file).
01CC   0A84           01019                 INCF    FSR                 ; VALOR INCREMENTADO DO PONTEIRO, PARA QUE EM TODOS OS TEMPO
                            S SEJAM IGUAIS
                      01020         ;BSF    CONTADOR_BITS, 3        ; COLOCO O VALOR 8 NO CONTADOR DE BITS QUE ANTES ESTAVA ZERADO
01CD   3008           01021         MOVLW   .8
01CE   00B3           01022         MOVWF   CONTADOR_BITS
01CF   1534           01023                 BSF     ESTAGIO, 2          ; SINALIZA QUE É O ENVIO DO ENDEREÇO
01D0   2A13           01024                 GOTO    ENVIA_BYTE          ; O VALOR QUE ESTIVER NO WORK, SERÁ ENVIADO
01D1                  01025 FIM_ENDERECO
01D1   0000           01026                 NOP
01D2   0000           01027                 NOP
                      01028                 ;NOP
Message[305]: Using default destination of 1 (file).
01D3   0D80           01029                 RLF     INDF                ; ULTIMO ROTATE PARA QUE PEGAR O VALOR QUE ESTAVA NO CARRY E
                             DEIXAR ORIGINAL
Message[305]: Using default destination of 1 (file).
01D4   03B2           01030                 DECF    CONTADOR_BYTES      ; DECREMENTA O CONTADOR DE BYTES TODA VEZ QUE É ENVIADO UM B
                            YTE
Message[305]: Using default destination of 1 (file).
01D5   0A84           01031                 INCF    FSR                 ; VALOR INCREMENTADO DO PONTEIRO, PARA QUE EM TODOS OS TEMPO
                            S SEJAM IGUAIS
                      01032                         ;BSF    CONTADOR_BITS, 3        ; COLOCO O VALOR 8 NO CONTADOR DE BITS QUE ANTES
                             ESTAVA ZERADO
01D6   3008           01033         MOVLW   .8
01D7   00B3           01034         MOVWF   CONTADOR_BITS
01D8   15B4           01035                 BSF     ESTAGIO, 3          ; SINALIZA QUE É O ENVIO DO DADO
MPASM 5.77                    TRACAO_OWP.ASM   10-11-2018  23:26:30         PAGE 22


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

01D9   2A13           01036                 GOTO    ENVIA_BYTE          ; O VALOR QUE ESTIVER NO WORK, SERÁ ENVIADO
01DA                  01037 FIM_DADO
Message[305]: Using default destination of 1 (file).
01DA   0D80           01038                 RLF     INDF                ; ULTIMO ROTATE PARA QUE PEGAR O VALOR QUE ESTAVA NO CARRY E
                             DEIXAR ORIGINAL
Message[305]: Using default destination of 1 (file).
01DB   03B2           01039                 DECF    CONTADOR_BYTES      ; DECREMENTA O CONTADOR DE BYTES TODA VEZ QUE É ENVIADO UM B
                            YTE
01DC   225D           01040                 CALL    DELAY_US
01DD   1485           01041                 BSF     GPIO, GP1           ; COLOCA O BARRAMENTO LIVRE, DEIXANDO ELE EM ALTA
                      01042                 
01DE   29A2           01043                 GOTO    FIM_ENVIA_DADOS
                      01044         
01DF                  01045 START_BIT_ENVIA
                      01046         ;DELAY DE 50 US EM ALTA
01DF   1485           01047         BSF     GPIO, GP1
01E0   225D           01048         CALL    DELAY_US
01E1   225D           01049         CALL    DELAY_US
01E2   225D           01050         CALL    DELAY_US
                      01051         ;NOP
01E3   0000           01052         NOP
01E4   0000           01053         NOP
01E5   0000           01054         NOP
01E6   0000           01055         NOP
01E7   0000           01056         NOP
01E8   0000           01057         NOP
01E9   0000           01058         NOP
01EA   1D05           01059         BTFSS   GPIO, GP2
01EB   2A45           01060             GOTO    COLISAO_START_BIT   ; SE HOUVER COLISÃO, TRATAR OS DADOS REFENTE A ELA
01EC   225D           01061         CALL    DELAY_US
01ED   225D           01062         CALL    DELAY_US
01EE   225D           01063         CALL    DELAY_US
01EF   225D           01064         CALL    DELAY_US
01F0   225D           01065         CALL    DELAY_US
01F1   225D           01066         CALL    DELAY_US
01F2   0000           01067         NOP
01F3   0000           01068         NOP
01F4   0000           01069         NOP
01F5   0000           01070         NOP
01F6   0000           01071         NOP
01F7   0000           01072         NOP
01F8   0000           01073         NOP
01F9   0000           01074         NOP
01FA   0000           01075         NOP
                      01076         
                      01077         ; DELAY DE 150 US EM BAIXA, NÃO NECESSITA VERIFICAR COLISÃO
01FB   1085           01078         BCF     GPIO, GP1
01FC   225D           01079         CALL    DELAY_US
01FD   225D           01080         CALL    DELAY_US
01FE   225D           01081         CALL    DELAY_US
01FF   225D           01082         CALL    DELAY_US
0200   225D           01083         CALL    DELAY_US
0201   225D           01084         CALL    DELAY_US
MPASM 5.77                    TRACAO_OWP.ASM   10-11-2018  23:26:30         PAGE 23


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0202   225D           01085         CALL    DELAY_US
0203   225D           01086         CALL    DELAY_US
0204   225D           01087         CALL    DELAY_US
0205   0000           01088         NOP
0206   0000           01089         NOP
0207   0000           01090         NOP
0208   0000           01091         NOP
0209   0000           01092         NOP
020A   0000           01093         NOP
020B   0000           01094         NOP
020C   0000           01095         NOP
020D   0000           01096         NOP
020E   0000           01097         NOP
020F   0000           01098         NOP
0210   0000           01099         NOP
0211   0000           01100         NOP
                      01101         
0212   29C3           01102         GOTO    FIM_START_BIT
                      01103         
                      01104 
0213                  01105 ENVIA_BYTE 
0213   1F80           01106     BTFSS   INDF, 7
0214   2A16           01107         GOTO    ENVIA_0
0215   2A22           01108         GOTO    ENVIA_1
                      01109 
0216                  01110 ENVIA_0
0216   1685           01111         BSF     GPIO, 5
0217   225D           01112         CALL    DELAY_US
0218   0000           01113         NOP
Message[305]: Using default destination of 1 (file).
0219   0D80           01114         RLF     INDF        
                      01115         
Message[305]: Using default destination of 1 (file).
021A   0BB3           01116         DECFSZ  CONTADOR_BITS
021B   2A42           01117             GOTO    TEMPO_EM_BAIXA      ; VAI PASSAR 20 US EM BAIXA
021C   1285           01118             BCF     GPIO, 5             ; FICA EM BAIXA O BARRAMENTO
021D   19B4           01119             BTFSC   ESTAGIO, 3          ; VERIFICA SE TERMINOU DE ENVIAR O DADO
021E   29DA           01120                 GOTO    FIM_DADO
021F   1934           01121             BTFSC   ESTAGIO, 2          ; VERIFICA SE TERMINOU DE ENVIAR O ENDERECO
0220   29D1           01122                 GOTO    FIM_ENDERECO
0221   29C8           01123                 GOTO    FIM_BYTE_0      ; CASO NÃO ESTEJA NENHUM, O BYTE ENVIADO É BYTE_0
                      01124 
0222                  01125 ENVIA_1
0222   1685           01126         BSF     GPIO, 5
                      01127         ; PASSA 30 US EM ALTA
0223   225D           01128         CALL    DELAY_US
0224   0000           01129         NOP
0225   0000           01130         NOP
0226   1D05           01131         BTFSS   GPIO, GP2               ; TESTA SE O BARRAMENTO NÃO ESTÁ COM COLISÃO
0227   29A2           01132             GOTO    FIM_ENVIA_DADOS     ; TRATAR COLISAO BITS
0228   0000           01133         NOP
0229   0000           01134         NOP
022A   0000           01135         NOP
MPASM 5.77                    TRACAO_OWP.ASM   10-11-2018  23:26:30         PAGE 24


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

022B   0000           01136         NOP
022C   0000           01137         NOP
022D   0000           01138         NOP
022E   0000           01139         NOP
022F   0000           01140         NOP
Message[305]: Using default destination of 1 (file).
0230   0D80           01141         RLF     INDF                    ; ROTACIONA O DADO
0231   1D05           01142         BTFSS   GPIO, GP2               ; TESTA SE O BARRAMENTO NÃO ESTÁ COM COLISÃO
0232   2A4B           01143             GOTO    COLISAO_ENVIAR_BITS ; TRATAR COLISAO BITS
                      01144         ; PASSA MAIS 10 US EM ALTA APOS CHECAR
0233   0000           01145         NOP
0234   0000           01146         NOP
0235   0000           01147         NOP
0236   0000           01148         NOP
0237   0000           01149         NOP
0238   0000           01150         NOP
0239   0000           01151         NOP
Message[305]: Using default destination of 1 (file).
023A   0BB3           01152         DECFSZ  CONTADOR_BITS
023B   2A42           01153             GOTO    TEMPO_EM_BAIXA      ; VAI PASSAR 20 US EM BAIXA
023C   1285           01154             BCF     GPIO, 5             ; FICA EM BAIXA O BARRAMENTO
023D   19B4           01155             BTFSC   ESTAGIO, 3          ; VERIFICA SE TERMINOU DE ENVIAR O DADO
023E   29DA           01156                 GOTO    FIM_DADO
023F   1934           01157             BTFSC   ESTAGIO, 2          ; VERIFICA SE TERMINOU DE ENVIAR O ENDERECO
0240   29D1           01158                 GOTO    FIM_ENDERECO
0241   29C8           01159                 GOTO    FIM_BYTE_0      ; CASO NÃO ESTEJA NENHUM, O BYTE ENVIADO É BYTE_0
0242                  01160 TEMPO_EM_BAIXA
0242   1285           01161         BCF     GPIO, 5
                      01162         ; PASSA 20 US EM BAIXA
0243   225D           01163         CALL    DELAY_US
0244   2A13           01164         GOTO    ENVIA_BYTE
0245                  01165 COLISAO_START_BIT
                      01166         
0245   15AC           01167         BSF     FLAG_COL_START_BIT              ; SINALIZO QUE HOUVE UMA COLISÃO NO START BIT
0246   14AC           01168         BSF     FLAG_COLISAO            ; SINALIZO QUE HOUVE UMA COLISÃO
0247   30D0           01169         MOVLW   B'11010000'
0248   008B           01170         MOVWF   INTCON                                  ;   ATIVAR AS INTERRUPÇÕES
0249   148B           01171         BSF     INTCON, INTF                            ; SINALIZO A INTERRUPÇÃO PARA QUE SEJA TRATADA I
                            MEDIATAMENTE
024A   299E           01172         GOTO    MAIN
                      01173         
024B                  01174 COLISAO_ENVIAR_BITS                                                             
024B   1380           01175         BCF     INDF,   7                               ; SETO O BIT DO REGISTRADOR APONTADO PARA 0, POI
                            S HOUVE COLISAO 
024C   0BB3           01176         DECFSZ  CONTADOR_BITS, F                        ; TEM QUE DECREMENTAR O CONTADOR DE BITS, POIS E
                            LE FOI LIDO JÁ E SERA LIDO OUTRA VEZ CASO NÃO DECREMENTE
024D   2A4F           01177             GOTO        $+2
024E   299E           01178             GOTO        MAIN
024F   162C           01179         BSF     FLAG_COL_ENVIAR_BIT                     ; SINALIZO QUE HOUVE UMA COLISÃO NO START BIT NO
                             REGISTRADOR BARRAMENTO
0250   14AC           01180         BSF     FLAG_COLISAO                            ; SINALIZO QUE HOUVE UMA COLISÃO
0251   30D0           01181         MOVLW   B'11010000'
0252   008B           01182         MOVWF   INTCON                                  ;   ATIVAR AS INTERRUPÇÕES
MPASM 5.77                    TRACAO_OWP.ASM   10-11-2018  23:26:30         PAGE 25


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0253   148B           01183         BSF     INTCON, INTF                            ; SINALIZO A INTERRUPÇÃO PARA QUE SEJA TRATADA I
                            MEDIATAMENTE
0254   299E           01184         GOTO    MAIN
                      01185         
0255                  01186 START_SYNC_SLAVE
0255   1085           01187         BCF     GPIO, GP1
                      01188         ; PASSA 250 US EM BAIXA
                      01189                         ;244 cycles
0256   3052           01190         MOVLW   .82
0257   00A7           01191         MOVWF   DELAY_SYNC
0258                  01192 START_SYNC_SLAVE_0
0258   0BA7           01193         DECFSZ  DELAY_SYNC, F
0259   2A58           01194         GOTO    START_SYNC_SLAVE_0
                      01195         
025A   2A5B           01196         GOTO    $+1
025B   1485           01197         BSF     GPIO, GP1
025C   0008           01198         RETURN
                      01199 
025D                  01200 DELAY_US
025D   0000           01201     NOP
025E   0000           01202     NOP
025F   0000           01203     NOP
0260   0000           01204     NOP
0261   0000           01205     NOP
0262   0000           01206     NOP
0263   0000           01207     NOP
0264   0000           01208     NOP
0265   0000           01209     NOP
0266   0000           01210     NOP
                      01211     
0267   0008           01212     RETURN
0268                  01213 DELAY100MS
                      01214                         ;99993 cycles
0268   301E           01215         MOVLW   .30
0269   00AB           01216         movwf   CONT_1
026A   304F           01217         MOVLW   .79
026B   00AA           01218         movwf   CONT_2
026C                  01219 DELAY100MS_0
Message[305]: Using default destination of 1 (file).
026C   0BAB           01220         DECFSZ  CONT_1
026D   2A6F           01221         GOTO    $+2
Message[305]: Using default destination of 1 (file).
026E   0BAA           01222         DECFSZ  CONT_2
026F   2A6C           01223         GOTO    DELAY100MS_0
                      01224                         ;3 cycles
0270   2A71           01225         GOTO    $+1
0271   0000           01226         NOP
                      01227                         ;4 cycles (including call)
0272   0008           01228         RETURN
                      01229 ;###################################################################################
                      01230 ;           DESTINADO A CALCULAR OS TEMPOS DO PWM DOS MOTORES
0273                  01231 INICIALIZA_CONTADORES                   ;RECEBE A PORCENTAGEM DO PWM PARA AS VELOCIDADES E O VALOR CALCU
                            LADO FICA
MPASM 5.77                    TRACAO_OWP.ASM   10-11-2018  23:26:30         PAGE 26


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01232     
0273   00CA           01233     MOVWF       AUX_CONTADOR_ALTA                   ; MOVE O VALOR DO WORK PARA O CONTADOR
                      01234     ;MOVLW      .100
0274   3C64           01235     SUBLW       .100;AUX_CONTADOR_ALTA, 0           ;(AUX_CONTADOR_ALTA - 100) > 0
0275   00C9           01236     MOVWF       AUX_CONTADOR_BAIXA                  ; O VALOR SUBTRAIDO DE 100 É JOGADO NO CONTADOR
                      01237     
0276   30FF           01238     MOVLW       0XFF                                
0277   00C8           01239     MOVWF       AUX_TEMPO_ALTA_L                    ; PASSA PARA TODAS A VARIAVEIS AUX O VALOR 255 POIS 
                            VAI DECREMENTAR
0278   00C7           01240     MOVWF       AUX_TEMPO_ALTA_H
0279   00C6           01241     MOVWF       AUX_TEMPO_BAIXA_L
027A   00C5           01242     MOVWF       AUX_TEMPO_BAIXA_H
027B                  01243 LABEL_TEMPO_ALTA
Message[305]: Using default destination of 1 (file).
027B   0BCA           01244     DECFSZ      AUX_CONTADOR_ALTA                   ; DECREMENTA O CONTADOR AUX E VER SE JA ACABOU 
027C   2A7E           01245         GOTO    SUB_TEMPO_ALTA                      ; SE NÃO ACABOU DECREMENTA O EQUIVALENTE A 1% DE 150
                            000 APROXIMADAMENTE
027D   2A83           01246         GOTO    LABEL_TEMPO_BAIXA                   ; SE ACABOU, FAÇA O MESMO PROCEDIMENTO PARA O TEMPO 
                            EM BAIXA
027E                  01247 SUB_TEMPO_ALTA
027E   300A           01248         MOVLW   VARIA_FREQUENCIA;.153                       ; EQUIVALE A 1%
Message[305]: Using default destination of 1 (file).
027F   02C8           01249         SUBWF   AUX_TEMPO_ALTA_L            ; SUBTRAI DO TEMPO EM ALTA LOW, SE O VALOR SUBTRAIDO FOR MAI
                            OR QUE O PRESENTE NO AUX, ESTOURA
0280   1C03           01250         BTFSS   STATUS, C
Message[305]: Using default destination of 1 (file).
0281   03C7           01251             DECF    AUX_TEMPO_ALTA_H        ; SE HOUVE ESTOURO, DECREMENTA O TEMPO H
0282   2A7B           01252             GOTO    LABEL_TEMPO_ALTA
                      01253 ;-----------------------------------
0283                  01254 LABEL_TEMPO_BAIXA
Message[305]: Using default destination of 1 (file).
0283   0BC9           01255     DECFSZ      AUX_CONTADOR_BAIXA          ; O MESMO PROCEDIMENTO PARA O TEMPO EM ALTA É SEGUIDO COM O 
                            TEMPO EM BAIXA, COM A SOBRA DA PORCENTAGEM
0284   2A86           01256         GOTO    SUB_TEMPO_BAIXA
0285   0008           01257         RETURN                              ; SE JÁ ACABOU, O TEMPO RETORNA COM OS VALORES CALCULADOS NA
                            S VARIAVEIS AUX
0286                  01258 SUB_TEMPO_BAIXA
0286   300A           01259         MOVLW   VARIA_FREQUENCIA;.153
0287   02C6           01260         SUBWF   AUX_TEMPO_BAIXA_L, 1
0288   1C03           01261         BTFSS   STATUS, C
Message[305]: Using default destination of 1 (file).
0289   03C5           01262             DECF    AUX_TEMPO_BAIXA_H       ; SE HOUVE SER ESTOURA INCREMENTA O TEMPO H
028A   2A83           01263             GOTO    LABEL_TEMPO_BAIXA       
                      01264             
                      01265             ; OS VALORES CALCULADOS FICARÃO EM AUX_TEMPO_ALTA_H,   AUX_TEMPO_ALTA_L
                      01266             ; E EM                             AUX_TEMPO_BAIXA_H E AUX_TEMPO_BAIXA_L
                      01267            
                      01268     END
MPASM 5.77                    TRACAO_OWP.ASM   10-11-2018  23:26:30         PAGE 27


SYMBOL TABLE
  LABEL                             VALUE 

ADCON0                            0000001F
ADCS0                             00000004
ADCS1                             00000005
ADCS2                             00000006
ADFM                              00000007
ADIE                              00000006
ADIF                              00000006
ADON                              00000000
ADRESH                            0000001E
ADRESL                            0000009E
ANS0                              00000000
ANS1                              00000001
ANS2                              00000002
ANS3                              00000003
ANSEL                             0000009F
AUX_CONTADOR_ALTA                 0000004A
AUX_CONTADOR_BAIXA                00000049
AUX_TEMPO_ALTA_H                  00000047
AUX_TEMPO_ALTA_L                  00000048
AUX_TEMPO_BAIXA_H                 00000045
AUX_TEMPO_BAIXA_L                 00000046
BANK0                             BCF STATUS,RP0
BANK1                             BSF STATUS,RP0
BARRAMENTO                        0000002C
BITS                              00000025
BIT_0                             00000060
BIT_1                             0000006A
BYTE                              00000024
BYTE_0                            0000003A
C                                 00000000
CAL0                              00000002
CAL1                              00000003
CAL2                              00000004
CAL3                              00000005
CAL4                              00000006
CAL5                              00000007
CHS0                              00000002
CHS1                              00000003
CINV                              00000004
CIS                               00000003
CM0                               00000000
CM1                               00000001
CM2                               00000002
CMCON                             00000019
CMIE                              00000003
CMIF                              00000003
COLISAO                           000000A5
COLISAO_ENVIAR_BITS               0000024B
COLISAO_START_BIT                 00000245
CONCLUIDA_LEITURA                 00000094
CONTADOR_BITS                     00000033
CONTADOR_BYTES                    00000032
CONTADOR_START_BIT                00000031
MPASM 5.77                    TRACAO_OWP.ASM   10-11-2018  23:26:30         PAGE 28


SYMBOL TABLE
  LABEL                             VALUE 

CONTADOR_START_SYNC               0000002F
CONT_1                            0000002B
CONT_2                            0000002A
CONT_START_SYNC_MASTER            00000026
COUNT_SYNC                        00000022
COUT                              00000006
DADO                              0000003C
DADO_ENVIAR                       0000002D
DADO_LIDO                         00000029
DC                                00000001
DELAY100MS                        00000268
DELAY100MS_0                      0000026C
DELAY_                            00000023
DELAY_SYNC                        00000027
DELAY_US                          0000025D
EEADR                             0000009B
EECON1                            0000009C
EECON2                            0000009D
EEDAT                             0000009A
EEDATA                            0000009A
EEIE                              00000007
EEIF                              00000007
ENDERECO                          0000003B
ENDERECO_ENVIAR                   00000035
ENVIA_0                           00000216
ENVIA_1                           00000222
ENVIA_BYTE                        00000213
ENVIA_DADOS                       000001B2
ESPERA_BIT_MUDAR                  00000074
ESPERA_BIT_MUDAR_1                00000077
ESPERA_SUBIDA_ST                  0000004D
ESPERA_SUBIDA_START_BIT           0000004A
ESTAGIO                           00000034
F                                 00000001
F1                                000000C8
F1_ALTA_H                         0000004B
F1_ALTA_L                         0000004C
F1_BAIXA_H                        00000053
F1_BAIXA_L                        00000054
F1_PRA_ALTA                       000000CE
F1_PRA_BAIXA                      000000D4
F2                                000000DA
F2_ALTA_H                         0000004D
F2_ALTA_L                         0000004E
F2_BAIXA_H                        00000055
F2_BAIXA_L                        00000056
F2_PRA_ALTA                       000000E0
F2_PRA_BAIXA                      000000E6
F3                                000000EC
F3_ALTA_H                         0000004F
F3_ALTA_L                         00000050
F3_BAIXA_H                        00000057
F3_BAIXA_L                        00000058
MPASM 5.77                    TRACAO_OWP.ASM   10-11-2018  23:26:30         PAGE 29


SYMBOL TABLE
  LABEL                             VALUE 

F3_PRA_ALTA                       000000F2
F3_PRA_BAIXA                      000000F8
FIM_BYTE_0                        000001C8
FIM_DADO                          000001DA
FIM_ENDERECO                      000001D1
FIM_ENVIA_DADOS                   000001A2
FIM_START_BIT                     000001C3
FLAG_BYTE_0                       ESTAGIO, 1
FLAG_COLISAO                      BARRAMENTO, 1
FLAG_COL_ENVIAR_BIT               BARRAMENTO, 4
FLAG_COL_START_BIT                BARRAMENTO, 3
FLAG_DADO                         ESTAGIO, 3
FLAG_ENDERECO                     ESTAGIO, 2
FSR                               00000004
GIE                               00000007
GO                                00000001
GO_DONE                           00000001
GO_NOT_DONE                       00000001
GP0                               00000000
GP1                               00000001
GP2                               00000002
GP3                               00000003
GP4                               00000004
GP5                               00000005
GPIE                              00000003
GPIF                              00000000
GPIO                              00000005
GPIO0                             00000000
GPIO1                             00000001
GPIO2                             00000002
GPIO3                             00000003
GPIO4                             00000004
GPIO5                             00000005
INCREMENTA_LIMPA                  0000001D
INCREMENTA_START_BIT              0000003B
INDF                              00000000
INICIALIZA_CONTADORES             00000273
INICIO                            0000013D
INICIO_START_SYNC                 00000012
INIC_CONT_START_SYNC              0000000E
INTCON                            0000000B
INTE                              00000004
INTEDG                            00000006
INTF                              00000001
IOC                               00000096
IOC0                              00000000
IOC1                              00000001
IOC2                              00000002
IOC3                              00000003
IOC4                              00000004
IOC5                              00000005
IOCB                              00000096
IOCB0                             00000000
MPASM 5.77                    TRACAO_OWP.ASM   10-11-2018  23:26:30         PAGE 30


SYMBOL TABLE
  LABEL                             VALUE 

IOCB1                             00000001
IOCB2                             00000002
IOCB3                             00000003
IOCB4                             00000004
IOCB5                             00000005
IRP                               00000007
LABEL_TEMPO_ALTA                  0000027B
LABEL_TEMPO_BAIXA                 00000283
LER_BITS                          00000052
LER_BITS_CONTINUA                 00000057
LE_EEPROM                         00000136
MAIN                              0000019E
MONITORA_BITS                     00000028
MUDA_TMR1                         0000007C
NOT_BOD                           00000000
NOT_BOR                           00000000
NOT_DONE                          00000001
NOT_GPPU                          00000007
NOT_PD                            00000003
NOT_POR                           00000001
NOT_T1SYNC                        00000002
NOT_TO                            00000004
NRE                               00000040
NVEL1                             0000003D
NVEL2                             0000003E
NVEL3                             0000003F
OK_TRATAMENTO                     00000124
OK_TRATAMENTO_SAI                 00000132
OPTION_REG                        00000081
OSCCAL                            00000090
PARAR                             00000120
PASSA_DADO                        000000A9
PCL                               00000002
PCLATH                            0000000A
PCON                              0000008E
PEIE                              00000006
PIE1                              0000008C
PIR1                              0000000C
PROPRIETARIO                      00000030
PS0                               00000000
PS1                               00000001
PS2                               00000002
PSA                               00000003
RD                                00000000
RE                                000000FE
REQUISICAO                        00000110
RE_ALTA_H                         00000051
RE_ALTA_L                         00000052
RE_BAIXA_H                        00000059
RE_BAIXA_L                        0000005A
RE_PRA_ALTA                       00000104
RE_PRA_BAIXA                      0000010A
RP0                               00000005
MPASM 5.77                    TRACAO_OWP.ASM   10-11-2018  23:26:30         PAGE 31


SYMBOL TABLE
  LABEL                             VALUE 

RP1                               00000006
SAI_DAQUI                         000000A3
SAI_INT                           000000AC
SRE                               00000044
START_BIT                         00000034
START_BIT_CONFIGURA               00000031
START_BIT_ENVIA                   000001DF
START_BIT_INICIO                  0000002F
START_BIT_LOW                     00000045
START_BIT_LOW_INICIO              00000042
START_SYNC                        00000016
START_SYNC_SLAVE                  00000255
START_SYNC_SLAVE_0                00000258
STATUS                            00000003
STATUS_TEMP                       00000021
SUB_TEMPO_ALTA                    0000027E
SUB_TEMPO_BAIXA                   00000286
SVEL1                             00000041
SVEL2                             00000042
SVEL3                             00000043
T0CS                              00000005
T0IE                              00000005
T0IF                              00000002
T0SE                              00000004
T1CKPS0                           00000004
T1CKPS1                           00000005
T1CON                             00000010
T1IE                              00000000
T1IF                              00000000
T1OSCEN                           00000003
TEMPO_ALTA_H                      0000005B
TEMPO_ALTA_L                      0000005C
TEMPO_BAIXA_H                     0000005D
TEMPO_BAIXA_L                     0000005E
TEMPO_EM_ALTA_1                   00000129
TEMPO_EM_ALTA_1_INT               00000082
TEMPO_EM_BAIXA                    00000242
TEMPO_EM_BAIXA_1                  0000012E
TEMPO_EM_BAIXA_1_INT              0000008D
TMR0                              00000001
TMR0IE                            00000005
TMR0IF                            00000002
TMR1                              0000000E
TMR1CS                            00000001
TMR1GE                            00000006
TMR1H                             0000000F
TMR1IE                            00000000
TMR1IF                            00000000
TMR1L                             0000000E
TMR1ON                            00000000
TRATAR_COLISAO                    0000000B
TRATAR_DADO                       000000B8
TRISIO                            00000085
MPASM 5.77                    TRACAO_OWP.ASM   10-11-2018  23:26:30         PAGE 32


SYMBOL TABLE
  LABEL                             VALUE 

TRISIO0                           00000000
TRISIO1                           00000001
TRISIO2                           00000002
TRISIO3                           00000003
TRISIO4                           00000004
TRISIO5                           00000005
VARIA_FREQUENCIA                  .10
VCFG                              00000006
VELOCIDADE                        0000002E
VERIFICA_1_0                      0000005D
VERIFICA_BARRAMENTO               000001A4
VERIFICA_BARRAMENTO_0             000001AB
VERIFICA_F2_F3                    000000C5
VERIFICA_MASTER                   0000002A
VERIFICA_RE_REQUESICAO            000000C2
VERIFICA_SLAVER                   00000022
VERIFICA_START_BIT                0000003F
VR0                               00000000
VR1                               00000001
VR2                               00000002
VR3                               00000003
VRCON                             00000099
VREN                              00000007
VRR                               00000005
W                                 00000000
WPU                               00000095
WPU0                              00000000
WPU1                              00000001
WPU2                              00000002
WPU4                              00000004
WPU5                              00000005
WR                                00000001
WREN                              00000002
WRERR                             00000003
W_TEMP                            00000020
Z                                 00000002
_BODEN_OFF                        00003FBF
_BODEN_ON                         00003FFF
_BOREN_OFF                        00003FBF
_BOREN_ON                         00003FFF
_CONFIG                           00002007
_CPD_OFF                          00003FFF
_CPD_ON                           00003EFF
_CP_OFF                           00003FFF
_CP_ON                            00003F7F
_DEVID1                           00002006
_EC_OSC                           00003FFB
_EXTRC_OSC_CLKOUT                 00003FFF
_EXTRC_OSC_NOCLKOUT               00003FFE
_FOSC_EC                          00003FFB
_FOSC_EXTRCCLK                    00003FFF
_FOSC_EXTRCIO                     00003FFE
_FOSC_HS                          00003FFA
MPASM 5.77                    TRACAO_OWP.ASM   10-11-2018  23:26:30         PAGE 33


SYMBOL TABLE
  LABEL                             VALUE 

_FOSC_INTRCCLK                    00003FFD
_FOSC_INTRCIO                     00003FFC
_FOSC_LP                          00003FF8
_FOSC_XT                          00003FF9
_HS_OSC                           00003FFA
_IDLOC0                           00002000
_IDLOC1                           00002001
_IDLOC2                           00002002
_IDLOC3                           00002003
_INTRC_OSC_CLKOUT                 00003FFD
_INTRC_OSC_NOCLKOUT               00003FFC
_LP_OSC                           00003FF8
_MCLRE_OFF                        00003FDF
_MCLRE_ON                         00003FFF
_PWRTE_OFF                        00003FFF
_PWRTE_ON                         00003FEF
_WDTE_OFF                         00003FF7
_WDTE_ON                          00003FFF
_WDT_OFF                          00003FF7
_WDT_ON                           00003FFF
_XT_OSC                           00003FF9
__12F675                          00000001


MEMORY USAGE MAP ('X' = Used,  '-' = Unused)

0000 : X---XXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0040 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0080 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
00C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0100 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0140 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0180 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
01C0 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0200 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0240 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
0280 : XXXXXXXXXXX----- ---------------- ---------------- ----------------
2000 : -------X-------- ---------------- ---------------- ----------------
2100 : XXXXXXXXXX------ ---------------- ---------------- ----------------

All other memory blocks unused.

Program Memory Words Used:   648
Program Memory Words Free:   376


Errors   :     0
Warnings :     0 reported,     0 suppressed
Messages :    45 reported,     0 suppressed

